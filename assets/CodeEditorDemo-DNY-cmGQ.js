import{e as F}from"./monaco-editor-CFAWLn37.js";import{d as S,O,z as b,o as m,c as v,u as p,h as B,j as w,a as o,k as L,l as M,C as P,n as U,B as A,g as y,i as T,t as k,e as C,_ as x}from"./index-DRLvRy0Y.js";const H=t=>{console.warn(`[MonacoEditorVue3]: ${t}`)},_=t=>typeof t=="number"?`${t}px`:typeof t=="string"?t.includes("%")||t.includes("px")||t.includes("rem")||t.includes("em")?t:`${t}px`:"100%",j=()=>{const t=y({isLoading:!1,loadingText:"Loading Monaco Editor...",progress:0}),n=y(null),r=y(!1),a=s=>{t.value={...t.value,...s}};return{loading:t,error:n,isReady:r,setLoading:a,setError:s=>{n.value=s,s&&(H(`Editor Error [${s.code}]: ${s.message}`),s.details&&console.error("Error details:",s.details))},clearError:()=>{n.value=null},setReady:s=>{r.value=s,s&&a({isLoading:!1,progress:100})}}},J=t=>({executeHook:async(r,...a)=>{var i;const d=t?.[r];if(d)try{await d(...a)}catch(l){(i=t?.onError)==null||i.call(t,{code:"LIFECYCLE_ERROR",message:`Error in ${r} hook`,details:l instanceof Error?l.message:String(l),recoverable:!0})}}}),N=(t,n)=>{let r=null;const a=y(),{loading:i,error:d,isReady:l,setLoading:s,setError:e,clearError:u,setReady:D}=j(),{executeHook:h}=J(t.lifecycle),$=async()=>{try{if(!a.value)throw new Error("Container element not found");await h("beforeCreate"),s({isLoading:!0,progress:20}),await h("onCreating"),n("editorWillMount"),s({progress:50});const g={value:t.value,language:t.language,theme:t.theme,...t.options};r=F.create(a.value,g),s({progress:80}),await h("onCreated",r),r.onDidChangeModelContent(f=>{const E=r.getValue();t.value!==E&&(n("change",E,f),n("update:value",E))}),D(!0),await h("onReady",r),n("editorDidMount",r)}catch(g){const f={code:"EDITOR_CREATE_FAILED",message:"Failed to create Monaco editor",details:g instanceof Error?g.message:String(g),recoverable:!0};e(f),await h("onError",f)}},R=async()=>{try{await h("beforeDestroy"),r&&(r.dispose(),r=null),D(!1),u(),await h("onDestroyed")}catch(g){const f={code:"EDITOR_DESTROY_FAILED",message:"Failed to destroy Monaco editor",details:g instanceof Error?g.message:String(g),recoverable:!1};e(f)}};return P(()=>{U(()=>{$()})}),A(()=>{R()}),b(()=>t.options,g=>{if(!(!g||!r))try{r.updateOptions(g)}catch(f){const E={code:"OPTIONS_UPDATE_FAILED",message:"Failed to update editor options",details:f instanceof Error?f.message:String(f),recoverable:!0};e(E)}},{deep:!0}),b(()=>t.value,g=>{if(!r||g===void 0)return;if(r.getValue()!==g)try{r.setValue(g)}catch(E){const I={code:"VALUE_UPDATE_FAILED",message:"Failed to update editor value",details:E instanceof Error?E.message:String(E),recoverable:!0};e(I)}}),{editorInstance:r,container:a,loading:i,error:d,isReady:l,retry:()=>{u(),$()},destroy:R}},z=o("div",null,[o("div")],-1),W={key:0},Y=S({__name:"MonacoLoading",props:{loadingText:{default:"Loading Monaco Editor..."},progress:{default:0},showProgress:{type:Boolean,default:!0}},setup(t){return(n,r)=>(m(),v("div",null,[o("div",null,[z,o("div",null,k(n.loadingText),1),n.showProgress?(m(),v("div",W,[o("div",null,[o("div",{style:L({width:`${n.progress}%`})},null,4)]),o("div",null,k(n.progress)+"%",1)])):w("",!0)])]))}}),q=o("div",null,[o("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[o("circle",{cx:"12",cy:"12",r:"10",stroke:"#dc3545","stroke-width":"2"}),o("path",{d:"m15 9-6 6",stroke:"#dc3545","stroke-width":"2"}),o("path",{d:"m9 9 6 6",stroke:"#dc3545","stroke-width":"2"})])],-1),G=o("div",null,"Monaco Editor Error",-1),K={key:0},Q=o("summary",null,"Error Details",-1),X={key:1},Z=S({__name:"MonacoErrorBoundary",props:{error:{},showDetails:{type:Boolean,default:!0},showRetry:{type:Boolean,default:!0},showReload:{type:Boolean,default:!1},showReport:{type:Boolean,default:!1}},emits:["retry","reload","report"],setup(t,{emit:n}){const r=t,a=n,i=M(()=>r.error.code),d=()=>{a("retry")},l=()=>{typeof window<"u"&&window.location.reload(),a("reload")},s=()=>{a("report",r.error)};return(e,u)=>(m(),v("div",null,[o("div",null,[q,G,o("div",null,k(e.error.message),1),e.error.details&&e.showDetails?(m(),v("div",K,[o("details",null,[Q,o("pre",null,k(e.error.details),1)])])):w("",!0),o("div",null,[e.error.recoverable&&e.showRetry?(m(),v("button",{key:0,onClick:d},"Retry")):w("",!0),e.showReload?(m(),v("button",{key:1,onClick:l},"Reload Page")):w("",!0),e.showReport?(m(),v("button",{key:2,onClick:s},"Report Issue")):w("",!0)]),i.value?(m(),v("div",X,"Error Code: "+k(i.value),1)):w("",!0)])]))}}),ee=S({__name:"CodeEditor",props:{loadingText:{},showProgress:{type:Boolean,default:!0},showErrorBoundary:{type:Boolean,default:!0},retryable:{type:Boolean,default:!0},lifecycle:{},useDefaultLoading:{type:Boolean,default:!0},useDefaultErrorBoundary:{type:Boolean,default:!0},value:{default:""},width:{default:"100%"},height:{default:"100%"},theme:{default:"vs"},language:{default:"javascript"},options:{default:()=>({})}},emits:["editorWillMount","editorDidMount","change","update:value","error","ready","loading"],setup(t,{emit:n}){const r=t,a=n,{container:i,loading:d,error:l,isReady:s,retry:e}=N(r,a),{width:u,height:D}=O(r),h=M(()=>({width:_(u.value),height:_(D.value),textAlign:"left",position:"relative"})),$=M(()=>({width:"100%",height:"100%",visibility:s.value&&!l.value?"visible":"hidden"})),R=()=>{e(),a("error",null)};return b(d,c=>{a("loading",c)},{deep:!0}),b(l,c=>{a("error",c)}),b(s,c=>{c&&a("ready")}),(c,g)=>(m(),v("div",{ref:"editorContainer",style:L(h.value),class:"monaco-code-editor"},[!p(s)&&!p(l)?B(c.$slots,"loading",{key:0,loading:p(d),loadingText:c.loadingText||p(d).loadingText,progress:p(d).progress,showProgress:c.showProgress},()=>[c.useDefaultLoading?(m(),T(Y,{key:0,"loading-text":c.loadingText||p(d).loadingText,progress:p(d).progress,"show-progress":c.showProgress},null,8,["loading-text","progress","show-progress"])):w("",!0)]):p(l)&&c.showErrorBoundary?B(c.$slots,"error",{key:1,error:p(l),retry:R,retryable:c.retryable},()=>[c.useDefaultErrorBoundary?(m(),T(Z,{key:0,error:p(l),"show-retry":c.retryable,"show-details":!0,"show-reload":!1,"show-report":!1,onRetry:R},null,8,["error","show-retry"])):w("",!0)]):w("",!0),o("div",{ref_key:"container",ref:i,style:L($.value)},null,4)],4))}}),oe={class:"code-editor-field"},te={class:"editor-container"},re=S({__name:"CodeEditorField",props:{modelValue:{},language:{},theme:{}},emits:["update:modelValue"],setup(t,{emit:n}){const r=t,a=n,i=y(r.modelValue);b(()=>r.modelValue,s=>{i.value!==s&&(i.value=s)}),b(i,s=>{a("update:modelValue",s)},{deep:!0});const d=r.theme??"vs-dark",l={lineNumbers:"on",minimap:{enabled:!0},wordWrap:"on",fontSize:14,automaticLayout:!0,scrollBeyondLastLine:!1};return(s,e)=>(m(),v("div",oe,[o("div",te,[C(p(ee),{value:i.value,"onUpdate:value":e[0]||(e[0]=u=>i.value=u),language:t.language,theme:p(d),options:l},null,8,["value","language","theme"])])]))}}),V=x(re,[["__scopeId","data-v-53d0131f"]]),se={class:"code-editor-demo"},ne={class:"demo-sections"},ae={class:"demo-section"},le={class:"demo-section"},ie={class:"demo-section"},de={class:"demo-section"},ue={class:"demo-section"},ce={class:"demo-section"},ge=S({__name:"CodeEditorDemo",setup(t){const n=y(`{
  "name": "test",
  "count": 42,
  "items": ["a", "b", "c"]
}`),r=y(`Hello <%= name %>!
Count: <%= count %>
<% items.forEach(item => { %>
  - <%= item %>
<% }) %>`),a=y(`Hello {{name}}!
Count: {{count}}
{{#items}}
  - {{.}}
{{/items}}`),i=y(`<div class="box">
  <h1>Title</h1>
  <p>Content here</p>
</div>`),d=y(`const x = 1;
const obj = { a: 1, b: 2 };
function add(a, b) {
  return a + b;
}`),l=y(`Simple string content
No syntax highlighting
Multiple lines`);return(s,e)=>(m(),v("div",se,[e[18]||(e[18]=o("div",{class:"demo-header"},[o("h1",null,"Code Editor Demo"),o("p",{class:"subtitle"}," Monaco-based code editor with line numbers and syntax highlighting. Supports JSON, EJS, Mustache, HTML, JavaScript, and plain text. ")],-1)),o("div",ne,[o("section",ae,[e[6]||(e[6]=o("h2",{class:"section-title"},"JSON",-1)),e[7]||(e[7]=o("p",{class:"section-desc"},"Syntax highlighting for keys and values",-1)),C(V,{modelValue:n.value,"onUpdate:modelValue":e[0]||(e[0]=u=>n.value=u),language:"json"},null,8,["modelValue"])]),o("section",le,[e[8]||(e[8]=o("h2",{class:"section-title"},"EJS",-1)),e[9]||(e[9]=o("p",{class:"section-desc"},"Embedded JavaScript templates",-1)),C(V,{modelValue:r.value,"onUpdate:modelValue":e[1]||(e[1]=u=>r.value=u),language:"html"},null,8,["modelValue"])]),o("section",ie,[e[10]||(e[10]=o("h2",{class:"section-title"},"Mustache",-1)),e[11]||(e[11]=o("p",{class:"section-desc"},"Mustache/Handlebars-style templates",-1)),C(V,{modelValue:a.value,"onUpdate:modelValue":e[2]||(e[2]=u=>a.value=u),language:"html"},null,8,["modelValue"])]),o("section",de,[e[12]||(e[12]=o("h2",{class:"section-title"},"HTML",-1)),e[13]||(e[13]=o("p",{class:"section-desc"},"HTML markup",-1)),C(V,{modelValue:i.value,"onUpdate:modelValue":e[3]||(e[3]=u=>i.value=u),language:"html"},null,8,["modelValue"])]),o("section",ue,[e[14]||(e[14]=o("h2",{class:"section-title"},"JavaScript",-1)),e[15]||(e[15]=o("p",{class:"section-desc"},"JavaScript code",-1)),C(V,{modelValue:d.value,"onUpdate:modelValue":e[4]||(e[4]=u=>d.value=u),language:"javascript"},null,8,["modelValue"])]),o("section",ce,[e[16]||(e[16]=o("h2",{class:"section-title"},"Plain Text",-1)),e[17]||(e[17]=o("p",{class:"section-desc"},"Simple string content",-1)),C(V,{modelValue:l.value,"onUpdate:modelValue":e[5]||(e[5]=u=>l.value=u),language:"plaintext"},null,8,["modelValue"])])])]))}}),fe=x(ge,[["__scopeId","data-v-fbf2e15c"]]);export{fe as default};

import{d as j,m as B,c as k,a as n,b as U,w as q,v as G,F as W,r as H,e as J,f as K,u as Q,t as u,g as f,n as X,o as y,_ as Y}from"./index-gslraR9R.js";import{M as ee,u as te,_ as oe,C as ne}from"./CustomNode-D6piBOkJ.js";const se={class:"flow-demo"},ae={class:"toolbar"},ie=["value"],de={class:"flow-container"},le={class:"flow-wrapper"},re={class:"default-node-content"},ce={class:"code"},ue=j({__name:"VueFlowDemo",setup(fe){const r=[{id:"0",label:"New Node 0",type:"custom",position:{x:165,y:225},data:{title:"Task: Deployment"}},{id:"1",label:"New Node 1",type:"custom",position:{x:510,y:315},data:{title:"Task: Enrichment"}}],v=[{id:"vueflow__edge-0-1",type:"default",source:"0",target:"1"}];let g=r.length;const _={custom:B(ne)},C={style:{strokeWidth:3,stroke:"#7c3aed"},pathOptions:{offset:50,curvature:.8,type:"smoothstep"},markerEnd:{type:ee.ArrowClosed,width:15,height:15,color:"#7c3aed"}},l=f(r),i=f(v),{onConnect:N,addEdges:V,onNodeDragStop:$,fitView:w,zoomIn:E,zoomOut:T,setViewport:x}=te(),p=f([]);function s(t){const e=new Date().toLocaleTimeString();p.value.unshift(`[${e}] ${t}`),p.value.length>20&&p.value.pop()}function I(t,e){const o=new Set,a=[t];for(;a.length>0;){const d=a.shift();if(d===e)return!0;if(!o.has(d)){o.add(d);for(const c of i.value)c.source===d&&a.push(c.target)}}return!1}function F(t){return i.value.some(e=>e.target===t)}function D(){const t=new Set(i.value.map(e=>e.target));return l.value.map(e=>e.id).filter(e=>!t.has(e))}N(t=>{const{source:e,target:o}=t;if(e===o){s("Connection rejected: cannot connect a node to itself");return}if(F(o)){s(`Connection rejected: "${o}" already has a parent`);return}if(I(o,e)){s(`Connection rejected: would create a cycle (${e} → ${o})`);return}const a=D();if(a.length>1){const d=h(e),c=h(o);d!==c&&a.length-1>1}V(t),s(`Edge connected: ${e} → ${o}`)});function h(t){let e=t;const o=new Set;for(;;){o.add(e);const a=i.value.find(d=>d.target===e);if(!a||o.has(a.source))return e;e=a.source}}$(({node:t})=>{s(`Node "${t.label||t.id}" moved to (${Math.round(t.position.x)}, ${Math.round(t.position.y)})`)});function S({node:t}){s(`Node clicked: "${t.label||t.id}"`)}function M({edge:t}){s(`Edge clicked: ${t.id}`)}function R(){s("Pane clicked (background)")}function z(){w({padding:.2,duration:300}),s("Fit view triggered")}function O(){E({duration:300}),s("Zoomed in")}function Z(){T({duration:300}),s("Zoomed out")}function A(){x({x:0,y:0,zoom:1},{duration:300}),s("View reset")}const b=["Enrichment","Cleaning","Transformation","Modeling","Validation","Deployment"],m=f(b[0]);function L(){const t=String(g++),e={id:t,label:`New Node ${t}`,type:"custom",position:{x:Math.random()*400+50,y:Math.random()*300+50},data:{title:`Task: ${m.value}`}};l.value=[...l.value,e],s(`Added new node: "${e.label}"`),X(()=>{w({padding:.2,duration:300})})}function P(){l.value=r,i.value=v,g=r.length,s("Flow reset to initial state")}return(t,e)=>(y(),k("div",se,[e[4]||(e[4]=n("div",{class:"demo-header"},[n("h1",null,"Vue Flow Demo"),n("p",{class:"subtitle"},[U(" Interactive node-based graph editor powered by "),n("code",null,"@vue-flow/core")])],-1)),n("div",ae,[n("button",{class:"btn btn-primary",onClick:z},"Fit View"),n("button",{class:"btn btn-secondary",onClick:O},"Zoom In (+)"),n("button",{class:"btn btn-secondary",onClick:Z},"Zoom Out (-)"),n("button",{class:"btn btn-secondary",onClick:A},"Reset View"),e[3]||(e[3]=n("div",{class:"toolbar-divider"},null,-1)),n("button",{class:"btn btn-danger",onClick:P},"Reset Flow"),q(n("select",{"onUpdate:modelValue":e[0]||(e[0]=o=>m.value=o),class:"form-select"},[(y(),k(W,null,H(b,o=>n("option",{key:o,value:o},u(o),9,ie)),64))],512),[[G,m.value]]),n("button",{class:"btn btn-accent",onClick:L},"+ Add Task")]),n("div",de,[n("div",le,[J(Q(oe),{nodes:l.value,"onUpdate:nodes":e[1]||(e[1]=o=>l.value=o),edges:i.value,"onUpdate:edges":e[2]||(e[2]=o=>i.value=o),"node-types":_,"default-viewport":{zoom:1,x:0,y:0},"min-zoom":.2,"max-zoom":4,"snap-to-grid":!0,"snap-grid":[15,15],"fit-view-on-init":"",class:"vue-flow-instance",onNodeClick:S,onEdgeClick:M,onPaneClick:R,defaultEdgeOptions:C},{"node-default":K(({data:o,label:a})=>[n("div",re,u(a||o?.label),1)]),_:1},8,["nodes","edges"])]),n("div",ce,[n("pre",null,"nodes = "+u(l.value),1),n("pre",null,"edges = "+u(i.value),1)])])]))}}),ve=Y(ue,[["__scopeId","data-v-e9430d81"]]);export{ve as default};
